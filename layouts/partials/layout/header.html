<header class="mb-[56px] bg-white text-black">
    <nav class="z-50 bg-inherit fixed w-full top-0 start-0 border-b border-gray-200">
        <div class="h-[56px] container flex flex-wrap items-center justify-between mx-auto py-3 bg-inherit">

            <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
                <span class="text-inherit self-center text-xl tracking-wide whitespace-nowrap">
                    {{.Site.Title}}
                </span>
            </a>

            <button 
                data-collapse-toggle="navbar-sticky" 
                type="button"
                class="inline-flex items-center w-5 h-5 justify-center text-sm text-inherit rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
                aria-controls="navbar-sticky" 
                aria-expanded="false"
                onclick="toggleMenu(this)">
                <span class="sr-only">Open main menu</span>
                <svg class="w-5 h-5 closed-icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 17 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M1 1h15M1 7h15M1 13h15" />
                </svg>
                <svg class="w-5 h-5 open-icon hidden" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 4l12 12M4 16L16 4" />
                </svg>
            </button>

            <script>
                function toggleMenu(button) {
                    const isOpen = button.getAttribute("aria-expanded") === "true";
                    button.setAttribute("aria-expanded", isOpen ? "false" : "true");

                    const closedIcon = button.querySelector(".closed-icon");
                    const openIcon = button.querySelector(".open-icon");
                    
                    if (isOpen) {
                        closedIcon.classList.remove("hidden");
                        openIcon.classList.add("hidden");
                    } else {
                        closedIcon.classList.add("hidden");
                        openIcon.classList.remove("hidden");
                    }
                }

                document.addEventListener("DOMContentLoaded", () => {
                    const button = document.querySelector('[data-collapse-toggle="navbar-sticky"]');
                    if (button) {
                        const isOpen = button.getAttribute("aria-expanded") === "true";
                        button.querySelector(".closed-icon").classList.toggle("hidden", isOpen);
                        button.querySelector(".open-icon").classList.toggle("hidden", !isOpen);
                    }
                });
            </script>

            {{ $currentPage := . }}
            {{ $section := .Site.GetPage $currentPage.Section }}

            {{ if .Site.Menus.main }}
            <div class="hidden w-full lg:flex lg:w-auto md:order-1" id="navbar-sticky">
                <div
                    class="z-40 top-[50px] fixed inset-0 flex flex-col p-4 bg-white z-50 lg:relative lg:flex-row lg:p-0 lg:bg-inherit lg:z-auto lg:inset-auto lg:h-auto lg:w-auto lg:space-x-8 rtl:space-x-reverse">
                    <ul class="flex-grow block md:grid md:grid-cols-2 lg:flex gap-8 justify-end text-xl lg:text-base">
                        {{ range .Site.Menus.main.Sort }}
                        <li>
                            <a href="{{.URL}}"
                                class="{{if eq $section.RelPermalink .URL }}text-blue-700{{else}}text-inherit{{end}} block tracking-wide py-2 px-3 rounded hover:bg-gray-100 lg:hover:bg-transparent lg:hover:text-blue-600 lg:p-0"
                                aria-current="page">
                                {{ .Name }}
                            </a>
                        </li>
                        {{ end }}

                        {{ with .Translations }}
                        <li class="ml-0 mt-6 lg:ml-6 lg:mt-0">{{ partial "layout/language.html" . }}</li>
                        {{ end }}
                    </ul>
                </div>
            </div>
            {{ end }}

        </div>
    </nav>
</header>
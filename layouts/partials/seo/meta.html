{{- $title := .Page.Title}}
{{ $ISO8601 := "2006-01-02T15:04:05-07:00" }}
{{ $description := "" }}
{{ with .Description }}
  {{ $description = . }}
{{ else }}
  {{ if .IsPage }}
    {{ $description = .Summary }}
  {{ else }}
    {{ with .Site.Params.description }}
      {{ $description = . }}
    {{ end }}
  {{ end }}
{{ end }}

<!-- PAGE METADATA -->
<meta charset="utf-8">
<title>{{ $title }}</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="robots" content="follow, index">
<meta http-equiv="content-language" content="{{ .Site.Language }}">
<link rel="sitemap" type="application/xml" title="Sitemap" href="{{ .Site.BaseURL }}sitemap.xml" />

<!-- SEO METADATA -->
<meta name="description" content="{{ $description | truncate 160 }}">
<meta name="keywords" content="{{ with .Params.keywords }}{{range .}}{{.}},{{end}} {{else}} {{ with .Site.Params.keywords }}{{range .}}{{.}},{{end}}{{end}} {{ end }}" />
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ $description | truncate 160 }}">
{{ if .IsPage }}
<meta property="og:type" content="article">
{{ $pubDate := .Date }}
{{ if .Date.IsZero }}
  {{ with .GitInfo }}
    {{ with .Ancestors.Reverse | first 1 }}
      {{ range . }}
        {{ $pubDate = .AuthorDate }}
      {{ end }}
    {{ else }}
      {{ $pubDate = .AuthorDate }}
    {{ end }}
  {{ end }}
{{ end }}
<meta property="article:published_time" content="{{ $pubDate.Format $ISO8601 | safeHTML }}">
<meta property="article:modified_time" content="{{.Lastmod.Format $ISO8601 | safeHTML }}">
{{ with .Params.tags }}
<meta property="article:section" content="{{ index . 0 }}" />
{{ range . }}
<meta property="article:tag" content="{{ . }}" />
{{ end }}
{{ end }}
{{ else }}
<meta property="og:type" content="website">
{{ end }}
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:updated_time" content="{{ .Lastmod.Format $ISO8601 | safeHTML }}">
<meta property="og:locale" content="{{ .Site.Language }}">
{{ if .Translations}}
    {{ range .AllTranslations }}
        <meta property="og:locale:alternate" content="{{ .Language.LanguageName }}">
    {{ end }}
{{ end}}

<!-- IMAGE -->
{{- with .Page.Params.images -}}
    {{- range first 1 . -}}
        {{ $image := resources.GetMatch .src }}
        <meta property="og:image" content="{{ $image.Permalink }}" />
        {{ with $image }}
        <meta property="og:image:width" content="{{ .Width }}" />
        <meta property="og:image:height" content="{{ .Height }}" />
        {{ end }}
        {{ with .alt }}
        <meta property="og:image:alt" content="{{ . }}" />
        {{ end }}
    {{- end -}}
{{- end -}}

<!-- TWITTER CARD METADATA -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ .Title }}">
<meta name="twitter:description" content="{{$description}}">
{{- with .Page.Params.images -}}
    {{- range first 1 . -}}
        {{ $image := resources.GetMatch .src }}
        <meta name="twitter:image" content="{{ $image.Permalink }}" />
        {{ with .alt }}
        <meta name="twitter:image:alt" content="{{ . }}" />
        {{ end }}
    {{- end -}}
{{- end -}}

<!-- PAGE LINKS -->
<link rel="canonical" href="{{ .Permalink }}" itemprop="url" />
{{ if .Translations}}
    <link rel="alternate" href="{{ .Permalink }}" hreflang="x-default">
    {{ range .AllTranslations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" title="{{ .Language.LanguageName }}">
    {{ end }}
{{ end}}

<!-- MOBILE WEB APP -->
<meta name="apple-mobile-web-app-title" content="{{ $title }}" />
<meta name="application-name" content="{{ $title }}" />
<link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">

{{ partial "seo/json-ld/json-ld.html" . }}

{{ partial "dns-prefetch.html" . }}